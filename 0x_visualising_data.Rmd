---
title: "R for Actuaries - Part X"
subtitle: "Visualising Data"
author: "Mick Cooney <mcooney@agrippadataconsulting.com>"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    number_sections: true
    fig_caption: yes
    theme: cerulean
  pdf_document: default
---

```{r set_options, echo=FALSE}
options(width = 80L
       ,warn  = 1)

knitr::opts_chunk$set(tidy  = FALSE
                     ,cache = FALSE
                     ,fig.height =  7
                     ,fig.width  = 11)
```

```{r load_data, echo=FALSE, message=FALSE}
source('load_data_script.R')
```


# Visualising Data

Data visualisations is the single most powerful tool for data exploration and
analysis - one that is often over-looked and under-appreciated.

## Our First Visualisations

Our first visualisation is going to be a simple one: we plot the most updated
value of each claim from Ireland over time. The dataset `claims_snapshot_tbl`
is summarised version of our main dataset that contains this data.

### Point Plots

Focusing on Irish claims from 2010, We look at the lifetime of the claim
against the size of the amount, colouring the points by the claim type (`PD`
or `BI`).

```{r plot_first_pointplot, echo=TRUE}
plot_tbl <- claims_snapshot_tbl %>%
    filter(country_code == 'IRL'
          ,year         == 2010
           )

ggplot(plot_tbl) +
    geom_point(aes(x = claim_lifetime, y = amount, colour = claim_type))
```


### Boxplots

We create boxplots in a similar way

```{r plot_first_boxplot, echo=TRUE}
ggplot(plot_tbl) +
    geom_boxplot(aes(x = as.character(yearmonth), y = amount, colour = claim_type))
```


### Exercises

  * Create a point plot for UK claims (country code `GBP`) for the year 2012
  * Change the original plot to change both shape and colour depending on type of claim
  * 
